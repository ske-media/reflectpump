!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="592b5e21-29a7-4a61-947b-35e37c6ddfd9",e._sentryDebugIdIdentifier="sentry-dbid-592b5e21-29a7-4a61-947b-35e37c6ddfd9")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3583],{13583:function(e,t,n){n.d(t,{g:function(){return ec}});var r=n(11527),i=n(72811),o=n(13756),a=n(57673),s=n(52997),c=n.n(s),l=n(32709),u=n(50959),d=n(64984),p=n(13557),h=n(65178),f=n(53097);let m=u.forwardRef((e,t)=>{let{className:n,containerClassName:i,...o}=e;return(0,r.jsx)(p.uZ,{ref:t,containerClassName:(0,f.cn)("flex items-center gap-2 has-[:disabled]:opacity-50",i),className:(0,f.cn)("disabled:cursor-not-allowed",n),...o})});m.displayName="InputOTP";let g=u.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,f.cn)("flex items-center",n),...i})});g.displayName="InputOTPGroup";let x=u.forwardRef((e,t)=>{let{index:n,className:i,...o}=e,{char:a,hasFakeCaret:s,isActive:c}=u.useContext(p.VM).slots[n];return(0,r.jsxs)("div",{ref:t,className:(0,f.cn)("text-md relative flex h-12 w-12 items-center justify-center border-y border-r border-input font-medium transition-all first:rounded-l-md first:border-l last:rounded-r-md",c&&"z-10 ring-2 ring-ring ring-offset-background",i),...o,children:[a,s&&(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});x.displayName="InputOTPSlot",u.forwardRef((e,t)=>{let{...n}=e;return(0,r.jsx)("div",{ref:t,role:"separator",...n,children:(0,r.jsx)(h.Z,{})})}).displayName="InputOTPSeparator";var y=n(43884),v=n(64467);let w=e=>(0,r.jsx)(v.M,{...e,className:"w-full transform rounded-lg bg-gradient-to-b from-home-button-lg to-home-button-rg px-4 py-2 text-lg font-semibold text-white shadow-inner-white drop-shadow-lg transition duration-100 active:translate-y-0.5 active:opacity-90 active:ring-transparent disabled:text-opacity-50"});function b(e){let{side:t,className:n,children:i}=e;return(0,r.jsx)("div",{className:(0,f.cn)("absolute z-tooltip opacity-90",("left"===t||"right"===t)&&"top-1/2 mx-1 -translate-y-1/2",("bottom"===t||"top"===t)&&"left-1/2 my-1 -translate-x-1/2","left"===t&&"right-full","right"===t&&"left-full","bottom"===t&&"top-full","top"===t&&"bottom-full",n),children:(0,r.jsxs)("div",{className:(0,f.cn)("flex items-center","left"===t&&"flex-row","right"===t&&"flex-row-reverse","bottom"===t&&"flex-col-reverse","top"===t&&"flex-col"),children:[(0,r.jsx)("div",{className:(0,f.cn)("max-w-xs overflow-hidden whitespace-nowrap rounded-md border-transparent bg-white px-3 py-1.5 text-sm text-black"),children:i}),(0,r.jsx)("div",{className:(0,f.cn)("h-[10px] w-[10px] border-[5px] border-solid","left"===t?"border-l-white":"border-l-transparent","right"===t?"border-r-white":"border-r-transparent","top"===t?"border-t-white":"border-t-transparent","bottom"===t?"border-b-white":"border-b-transparent")})]})})}let j=e=>{let{open:t,side:n,children:i}=e;return t?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(b,{side:n,className:"hidden sm:block",children:"Last used"}),(0,r.jsx)(b,{side:"bottom",className:"block sm:hidden",children:"Last used"}),i]}):(0,r.jsx)(r.Fragment,{children:i})};var k=n(15767),_=n(58512),N=n(90708),T=n(86416),A=n(44838),S=n(39833),I=n(25333),P=n(35037),E=n(96233),C=n(67645),R=n(18612),U=n(99321),O=n(33964);n(11161);var L=n(7947),D=n(60065),W=n(77956);async function F(e,t){try{let{otpTokenId:n}=await (0,U.b9)({email:e,authType:t});return{type:"success",data:{otpTokenId:n}}}catch(e){return{type:"error",error:e}}}async function M(e){try{let{accessToken:t}=await (0,U.nL)(e);return{type:"success",data:{accessToken:t}}}catch(e){return{type:"error",error:e}}}n(15858);var Z=n(30762);async function G(e){if("google"===e)return await B();if("apple"===e)return await X();throw Error("Unknown provider: ".concat(e))}async function B(){let e;try{e=await Z.N9.signInWithGoogle()}catch(e){return{type:"error",error:e instanceof Error?e:Error(String(e))}}if(!e.credential)return{type:"error",error:Error("No credential returned from Google")};let{idToken:t}=e.credential,n=W.lX.GoogleAuthProvider.credential(t);return{type:"success",result:await W.lX.signInWithCredential(D.I8,n)}}async function X(){var e,t;let n;try{n=await Z.N9.signInWithApple()}catch(e){return{type:"error",error:e instanceof Error?e:Error(String(e))}}if(!n.credential)return{type:"error",error:Error("No credential returned from Apple")};let{idToken:r,nonce:i}=n.credential;if(!r||!i)return{type:"error",error:Error("No idToken or nonce returned from Apple")};let o=W.lX.OAuthProvider.credentialFromJSON({providerId:"apple.com",signInMethod:"apple.com",idToken:null===(e=n.credential)||void 0===e?void 0:e.idToken,nonce:null===(t=n.credential)||void 0===t?void 0:t.nonce,pendingToken:null});return{type:"success",result:await W.lX.signInWithCredential(D.I8,o)}}async function z(e){let t=function(e){if("apple"===e){let e=new W.lX.OAuthProvider("apple.com");return D.vc.appleScopes.forEach(t=>e.addScope(t)),e}if("google"===e){let e=new W.lX.GoogleAuthProvider;return D.vc.googleScopes.forEach(t=>e.addScope(t)),e.setCustomParameters({prompt:"select_account"}),e}throw Error("Unknown provider type: ".concat(e))}(e);try{if(!(0,L.yG)())return await W.lX.signInWithRedirect(D.I8,t),{type:"success",userCredential:null};{let e=await W.lX.signInWithPopup(D.I8,t);return{type:"success",userCredential:e}}}catch(e){return{type:"error",error:e instanceof Error?e:Error(String(e))}}}class H{dispose(){this.listeners.forEach(e=>e())}setEmail(e){this.email=e}setAuthStatus(e){this.status=e}get otpTokenValid(){return/^\d{6}$/.test(this.otpToken)}get otpToken(){let{status:e}=this;return"otp_sent"===e.type||"validating_otp"===e.type?e.otpToken:""}get lastUsedAuthProvider(){return(0,I.S)()}setOtpToken(e){let{status:t}=this;("otp_sent"===t.type||"validating_otp"===t.type)&&this.setAuthStatus({...t,otpToken:e})}resetStatus(){this.setAuthStatus({type:"idle"})}get redirectQuery(){return this.router.query.redirect||null}get clientTokenQuery(){return this.router.query.client_token||null}async sendOtpToken(){this.syncAuthState(),this.setAuthStatus({type:"sending_otp"});let e=await F(this.email,this.authType);if("error"===e.type){var t;let n=null===(t=e.error)||void 0===t?void 0:t.message;this.setAuthStatus({type:"error",errorMessage:n})}else{let{otpTokenId:t}=e.data;t?this.setAuthStatus({type:"otp_sent",otpTokenId:t,otpToken:""}):this.setAuthStatus({type:"sign_in_user_not_found"})}}async authWithProvider(e){N.dV.isNativePlatform()?await this.authWithNativeProvider(e):await this.authWithWebProvider(e)}async authWithNativeProvider(e){let t=await G(e);if("error"===t.type){var n;let e=null===(n=t.error)||void 0===n?void 0:n.message;this.setAuthStatus({type:"error",errorMessage:e})}else"success"===t.type&&t.result.user&&(this.setAuthStatus({type:"success"}),await this.onAuthWithProviderSuccess())}async authWithWebProvider(e){this.syncAuthState();let t=await z(e);if("error"===t.type){let e=t.error.message;this.setAuthStatus({type:"error",errorMessage:e});return}await this.handleProviderAuthResult(t.userCredential)}async validateOtpToken(){let{status:e}=this;if("otp_sent"!==e.type)return;this.setAuthStatus({type:"validating_otp",otpToken:e.otpToken});let t=await M({email:this.email,otpToken:e.otpToken,otpTokenId:e.otpTokenId});if("error"===t.type){let{error:e}=t,n=e instanceof C.ZE&&401===e.status?"Incorrect one-time login code":e.message;this.setAuthStatus({type:"error",errorMessage:n});return}try{await (0,T.signInWithCustomToken)(D.I8,t.data.accessToken),await this.onAuthWithProviderSuccess()}catch(t){let e=null==t?void 0:t.message;this.setAuthStatus({type:"error",errorMessage:e})}}syncAuthState(){let e=window.document.referrer;(0,P.oJ)({redirect:"back"===this.redirectQuery?e:this.redirectQuery,clientToken:this.clientTokenQuery,email:this.email})}async checkRedirectResult(){this.setAuthStatus({type:"pending"});let e=null;try{e=await (0,T.getRedirectResult)(D.I8)}catch(t){let e=null==t?void 0:t.message;this.setAuthStatus({type:"error",errorMessage:e});return}await this.handleProviderAuthResult(e)}async allowRedirectApp(e){if("sign-up"===this.authType)return!0;if("sign-in"===this.authType){var t,n;return(null!==(n=null===(t=(await (0,O.PR)(e.uid)).data())||void 0===t?void 0:t.graph_ids)&&void 0!==n?n:[]).length>0}(0,S.vE)(this.authType)}async handleProviderAuthResult(e){let t=null==e?void 0:e.user;t?await this.allowRedirectApp(t)?await this.onAuthWithProviderSuccess():this.setAuthStatus({type:"sign_in_user_not_found"}):this.setAuthStatus({type:"idle"})}async redirectToSignUp(){await this.router.push("/sign-up"+window.location.search)}async onAuthWithProviderSuccess(){(0,E.z)(),this.clientTokenQuery?(await (0,U._A)(this.clientTokenQuery),await (0,R.Z)(2e3),this.setAuthStatus({type:"success"})):"back"===this.redirectQuery?this.router.back():await this.router.push("/app")}async observeCapacitorDeepLink(){if(!N.dV.isPluginAvailable("App"))return;let e=await _.g.addListener("appUrlOpen",async e=>{let t=new URL(e.url),n=t.pathname+t.search;console.log("[Capacitor] requested to open url",e.url),t.protocol.startsWith("http")&&await this.router.push(n)});this.listeners.push(()=>e.remove())}constructor({router:e,authType:t}){this.listeners=[],this.email="",this.status={type:"idle"},this.updateOtpToken=e=>{let t=""===this.otpToken;this.setOtpToken(e);let n=this.otpTokenValid;t&&n&&this.validateOtpToken()},this.router=e,this.authType=t,(0,A.makeObservable)(this),this.observeCapacitorDeepLink()}}(0,k.gn)([A.observable],H.prototype,"email",void 0),(0,k.gn)([A.observable],H.prototype,"status",void 0),(0,k.gn)([A.action],H.prototype,"setEmail",null),(0,k.gn)([A.action],H.prototype,"setAuthStatus",null),(0,k.gn)([A.computed],H.prototype,"otpTokenValid",null),(0,k.gn)([A.computed],H.prototype,"otpToken",null),(0,k.gn)([A.computed],H.prototype,"lastUsedAuthProvider",null);var J=n(4814),V=n(43077);let Y=e=>{let{className:t,...n}=e;return(0,r.jsx)(V.d,{className:(0,J.Z)("block w-full appearance-none rounded-lg border border-bluegray-800 bg-bluegray-900 bg-opacity-50 px-4 py-3 text-center text-base placeholder-bluegray-400 shadow-sm outline-none transition duration-300 focus:border-purple-400 focus:outline-none focus:ring focus:ring-purple-500 focus:ring-opacity-50",t),...n})},Q=(0,i.Pi)(e=>{let{authType:t}=e,n=(0,l.useRouter)(),i=(0,y.D)(()=>new H({router:n,authType:t}),[n,t]);if((0,u.useEffect)(()=>{n.isReady&&i.checkRedirectResult()},[n.isReady,i]),!n.isReady)return(0,r.jsx)(d.O,{});switch(i.status.type){case"error":return(0,r.jsx)(er,{auth:i,errorMessage:i.status.errorMessage});case"pending":return(0,r.jsx)(K,{});case"success":return(0,r.jsx)(en,{auth:i});case"sign_in_user_not_found":return(0,r.jsx)($,{auth:i});default:return(0,r.jsx)(q,{auth:i})}}),q=(0,i.Pi)(e=>{let{auth:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-base font-medium text-white",children:"sign-up"===t.authType?"Sign up with":"Sign in with"}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,r.jsx)(j,{open:"google"===t.lastUsedAuthProvider,side:"left",children:(0,r.jsx)("a",{onClick:()=>t.authWithProvider("google"),title:"Sign in with Google",className:"inline-flex w-full transform cursor-pointer items-center justify-center rounded-lg bg-gradient-to-b from-home-button-lg to-home-button-rg px-4 py-3 text-center text-lg font-semibold text-white shadow-inner-white drop-shadow-lg transition duration-100 active:translate-y-0.5 active:opacity-90",children:(0,r.jsx)(o.S,{width:28,height:28})})}),(0,r.jsx)(j,{open:"apple"===t.lastUsedAuthProvider,side:"right",children:(0,r.jsx)("a",{onClick:()=>t.authWithProvider("apple"),title:"Sign in with Apple",className:"inline-flex w-full transform cursor-pointer items-center justify-center rounded-lg bg-gradient-to-b from-home-button-lg to-home-button-rg px-4 py-3 text-center text-lg font-semibold text-white shadow-inner-white drop-shadow-lg transition duration-100 active:translate-y-0.5 active:opacity-90",children:(0,r.jsx)(a.Z,{width:28,height:28})})})]})]}),(0,r.jsxs)("div",{className:"relative mt-10",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-bluegray-800"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-base",children:(0,r.jsx)("span",{className:"rounded-lg bg-home-black px-3 py-1 text-white text-opacity-80",children:"or continue with"})})]})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsx)(ei,{auth:t})})]})});function K(){return(0,r.jsx)("h4",{className:"pt-10 text-center text-lg",children:"Processing..."})}let $=(0,i.Pi)(e=>{let{auth:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pt-10 text-center text-3xl text-red-400",children:"Couldn't find your account"}),(0,r.jsx)("div",{className:"mx-auto max-w-40 pt-10",children:(0,r.jsx)("form",{children:(0,r.jsx)(w,{type:"button",onClick:()=>t.redirectToSignUp(),children:"Sign up"})})}),(0,r.jsx)("div",{className:"pt-10 text-secondary-foreground",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:"Already have an account? "}),(0,r.jsx)(c(),{href:"/auth",className:"font-semibold hover:underline hover:underline-offset-4",children:"Login again"})]})})]})}),ee=(0,i.Pi)(e=>{let{auth:t,disabled:n}=e;return(0,r.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-y-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)("label",{className:"text-sm text-white text-opacity-80",children:"We've emailed you a one-time login code"})}),(0,r.jsx)(m,{maxLength:6,value:t.otpToken,onChange:t.updateOtpToken,disabled:n,children:(0,r.jsxs)(g,{children:[(0,r.jsx)(x,{index:0}),(0,r.jsx)(x,{index:1}),(0,r.jsx)(x,{index:2}),(0,r.jsx)(x,{index:3}),(0,r.jsx)(x,{index:4}),(0,r.jsx)(x,{index:5})]})})]})}),et=(0,i.Pi)(e=>{let{auth:t}=e;return(0,r.jsx)(Y,{value:t.email,onChange:e=>{t.setEmail(e.currentTarget.value),t.resetStatus()},placeholder:"your@email.com",name:"email",type:"email",autoComplete:"email",required:!0,disabled:"sending_otp"===t.status.type})}),en=(0,i.Pi)(e=>{let{auth:t}=e;return(0,r.jsx)("div",{className:"space-y-4",children:t.clientTokenQuery?(0,r.jsxs)("div",{className:"space-y-4 pt-10",children:[(0,r.jsx)("h2",{className:"text-xl",children:"Signed in successfully"}),(0,r.jsx)("p",{className:"text-center text-sm",children:"You may close this window."})]}):(0,r.jsx)("h4",{className:"pt-10 text-center text-lg",children:"Processing..."})})}),er=(0,i.Pi)(e=>{let{auth:t,errorMessage:n}=e;return(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),t.resetStatus()},children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-3xl text-red-400",children:"Error signing in"}),(0,r.jsx)("p",{className:"text-center",children:n||"Something went wrong."}),(0,r.jsx)("div",{className:"pt-5",children:(0,r.jsx)(w,{children:"Try again"})})]})})}),ei=(0,i.Pi)(e=>{let{auth:t}=e,{status:n}=t;return"idle"===n.type||"sending_otp"===n.type?(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.sendOtpToken()},className:"space-y-4",children:[(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(et,{auth:t})}),(0,r.jsx)(j,{open:"email"===t.lastUsedAuthProvider,side:"right",children:(0,r.jsx)(w,{loading:"sending_otp"===n.type,children:"Continue"})})]}):"otp_sent"===n.type||"validating_otp"===n.type?(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t.validateOtpToken()},className:"space-y-4",children:[(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(et,{auth:t})}),(0,r.jsx)(ee,{auth:t}),(0,r.jsx)("div",{children:(0,r.jsx)(w,{disabled:!t.otpTokenValid,loading:"validating_otp"===n.type,children:"Continue with login code"})})]}):null});var eo=n(79819),ea=n(5992),es=n(69101);let ec=(0,i.Pi)(e=>{let{authType:t}=e;return(0,r.jsx)(ea.S,{className:"dark bg-home-black text-white",children:(0,r.jsx)(eo.X,{children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("section",{className:"relative shrink-0",children:(0,r.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6",children:(0,r.jsx)("div",{className:"pt-16 pb-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(es.E$,{className:"inline-flex"}),(0,r.jsx)("div",{className:"mx-auto max-w-3xl",children:(0,r.jsx)("div",{className:"mx-auto max-w-xs sm:flex sm:max-w-none sm:justify-center md:mt-5",children:(0,r.jsx)("div",{className:"min-h-80 min-w-72",children:(0,r.jsx)(Q,{authType:t})})})})]})})})}),(0,r.jsx)(es.nv,{})]})})})})},32137:function(e,t,n){var r,i,o,a,s,c,l,u;n.d(t,{L8:function(){return r},t6:function(){return i},ux:function(){return a},zt:function(){return o}}),(s=r||(r={})).Monday="Monday",s.Sunday="Sunday",(c=i||(i={})).DayMonthYear="dayMonthYear",c.MonthDayYear="monthDayYear",(l=o||(o={})).Hours12="12",l.Hours24="24",(u=a||(a={})).Active="active",u.Canceled="canceled",u.Incomplete="incomplete",u.IncompleteExpired="incomplete_expired",u.PastDue="past_due",u.Trialing="trialing",u.Unpaid="unpaid"},64467:function(e,t,n){n.d(t,{M:function(){return a}});var r=n(11527),i=n(4814);n(50959);var o=n(53097);let a=e=>{let{loading:t=!1,onClick:n,disabled:a,className:c,children:l,type:u="submit"}=e,d=t||a;return(0,r.jsxs)("button",{type:u,onClick:n,disabled:d,className:(0,o.cn)("focus:shadow-outline-purple relative inline-flex w-full min-w-28 items-center justify-center overflow-hidden rounded-md border-none bg-purple-600 px-4 py-2 text-base font-medium leading-6 text-white shadow-sm outline-none transition duration-300 ease-in-out focus:outline-none",d&&"cursor-auto opacity-50",!d&&"hover:bg-purple-500 active:bg-purple-700",c),children:[(0,r.jsx)("div",{className:(0,i.Z)("absolute inset-0 flex items-center justify-center transition duration-200 ease-in-out",!t&&"-translate-y-full opacity-0"),children:(0,r.jsx)(s,{})}),(0,r.jsx)("div",{className:(0,i.Z)("flex items-center space-x-2 transition duration-200 ease-in-out",t&&"translate-y-full opacity-0"),children:l})]})};function s(){return(0,r.jsxs)("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},43077:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(11527),i=n(44838),o=n(79978),a=n(11161),s=n(18612),c=n(79819);let l=e=>(0,a.W)()?(0,r.jsx)(u,{...e}):(0,r.jsx)(d,{...e}),u=e=>{let{onFocus:t,...n}=e,a=(0,o.ze)(),l=(0,c.L)(),u=async e=>{let t=null==l?void 0:l.current,n=e.target.getBoundingClientRect();await (0,i.when)(()=>"exact"===a.keyboardHeight.type),await (0,s.Z)(100);let r=window.innerHeight-a.keyboardHeight.value,o=n.bottom+75-r;o>0&&(null==t||t.scrollBy({top:o,behavior:"smooth"}))};return(0,r.jsx)("input",{...n,onFocus:e=>{u(e),null==t||t(e)}})},d=e=>(0,r.jsx)("input",{...e})},64984:function(e,t,n){n.d(t,{O:function(){return o}});var r=n(11527);n(50959);var i=n(66297);let o=e=>{let{duration:t=100,startAt:n=.1}=e;return(0,r.jsx)("div",{className:"dark",children:(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-b from-bluegray-900 to-near-black",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-5",children:[(0,r.jsx)(i.P,{duration:t,startAt:n}),(0,r.jsx)("div",{className:"hidden text-near-white opacity-50",children:"Loading..."})]})})})}},80092:function(e,t,n){n.d(t,{k:function(){return i}});var r=n(11527);n(50959);let i=e=>{let{progress:t}=e;return(0,r.jsx)("div",{className:"h-3 w-60 overflow-hidden rounded-md bg-coolgray-200 media-dark:bg-white/5 dark:bg-white/5",style:{maskImage:"radial-gradient(white, black)"},children:(0,r.jsx)("div",{className:"duration-250 h-full w-full rounded-md bg-coolgray-400 transition-all duration-200 ease-linear media-dark:bg-primary dark:bg-primary",style:{transform:"translate3d(".concat(-((1-t)*100),"%, 0, 0)")}})})}},66297:function(e,t,n){n.d(t,{P:function(){return a}});var r=n(11527),i=n(50959),o=n(80092);let a=e=>{let{duration:t,startAt:n=0}=e,[a,s]=(0,i.useState)(n);return(0,i.useEffect)(()=>{let e=setInterval(()=>{s(t=>t>=1?(clearInterval(e),1):t+.01)},t/100);return()=>clearInterval(e)},[]),(0,r.jsx)(o.k,{progress:a})}},69101:function(e,t,n){n.d(t,{nv:function(){return a},E$:function(){return s.E},Re:function(){return c.R}});var r=n(11527),i=n(52997),o=n.n(i);function a(){return(0,r.jsx)("footer",{className:"shrink-0 space-y-3 px-6 py-16",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-col items-center space-y-5 text-center",children:[(0,r.jsxs)("ul",{className:"flex space-x-6 text-sm text-white text-opacity-80 transition duration-300 hover:text-opacity-100",children:[(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"https://reflect.app/discord",prefetch:!1,children:"Discord"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"https://twitter.com/reflectnotes",prefetch:!1,children:"Twitter"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/terms",prefetch:!1,children:"Terms"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/privacy",prefetch:!1,children:"Privacy"})})]}),(0,r.jsx)("div",{className:"text-sm text-[#B1B2DD]",children:"Reflect App, LLC. All rights reserved."})]})})}n(50959);var s=n(91345),c=n(85349)},91345:function(e,t,n){n.d(t,{E:function(){return a}});var r=n(11527),i=n(64641),o=n.n(i);n(50959);let a=e=>{let{width:t=384,height:n=240,className:i}=e;return(0,r.jsx)(o(),{alt:"Reflect",src:"/site/logo-alt.png",className:i,width:t,height:n,quality:100})}},85349:function(e,t,n){n.d(t,{R:function(){return a}});var r=n(11527);n(50959);var i=n(1009),o=n(91345);let a=e=>{let{children:t}=e;return(0,r.jsx)(i.r,{open:!0,children:(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.E,{})}),(0,r.jsx)("div",{className:"mt-8 text-center text-white",children:t})]})})}},94242:function(e,t,n){n.d(t,{g:function(){return r}});function r(e,t){return t&&Object.values(e).includes(t)?t:void 0}},39833:function(e,t,n){n.d(t,{Ee:function(){return o},Rn:function(){return a},hu:function(){return i},vE:function(){return s}}),n(55872).Buffer;class r extends Error{constructor(e){super(e),this.name="AssertError"}}function i(e,t){if(!e)throw new r(t)}function o(e,t){if("string"!=typeof e||0===e.length)throw new r(t)}function a(e,t){if(!function(e,t){if("number"!=typeof e||Number.isNaN(e))throw new r(t)}(e,t),e<=0)throw new r(t)}function s(e,t){var n;throw new r(null!==(n="".concat(t,": ").concat(e))&&void 0!==n?n:"Unexpected value: ".concat(e))}},25333:function(e,t,n){n.d(t,{N:function(){return o},S:function(){return a}});let r="reflect-last-auth-provider",i=window.localStorage;function o(e){try{e&&"string"==typeof e&&(null==i||i.setItem(r,e))}catch(e){console.error(e)}}function a(){try{let e=null==i?void 0:i.getItem(r);if(e&&"string"==typeof e){if(e.includes("google"))return"google";if(e.includes("apple"))return"apple";return"email"}}catch(e){console.error(e)}return null}},35037:function(e,t,n){n.d(t,{oH:function(){return a},oJ:function(){return o}});let r="auth-state",i=window.localStorage;function o(e){try{null==i||i.setItem(r,JSON.stringify(e))}catch(e){console.error(e)}}function a(){try{let e=null==i?void 0:i.getItem(r);return e?JSON.parse(e):{}}catch(e){return console.error(e),null}}},11161:function(e,t,n){n.d(t,{W:function(){return i}});var r=n(90708);function i(){return r.dV.isNativePlatform()}},7947:function(e,t,n){n.d(t,{KF:function(){return i},Y8:function(){return a},yG:function(){return o},yv:function(){return s}});var r=n(14224);function i(){let e=null==r?void 0:"production";return"development"===e?"development":"production"===e?"production":"test"===e?"test":void 0}function o(){return"development"===i()}function a(){return"test"===i()}function s(){return"production"===i()}},91950:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(35735);function i(){return(0,r.n)()?null:window}},96233:function(e,t,n){n.d(t,{N:function(){return a},z:function(){return o}});var r=n(66530),i=n(50959);function o(){(0,r.setCookie)(null,"indexApp","1",{maxAge:93312e4,path:"/"})}function a(){(0,i.useEffect)(()=>{o()},[])}},35735:function(e,t,n){n.d(t,{n:function(){return r}});function r(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}},67645:function(e,t,n){n.d(t,{AC:function(){return o},C8:function(){return a},Cy:function(){return s},ZE:function(){return i}});var r=n(97708);class i extends Error{constructor(e,t){super(e),this.name="JsonFetchError",this.status=t}}async function o(e){let{url:t,method:n,mode:r,body:o,headers:a,searchParams:s,bearerAuth:c,tokenAuth:l,throwOnHttpError:u=!0}=e,d={method:n||(o?"POST":"GET"),headers:{...o?{"Content-Type":"application/json"}:{},...c?{Authorization:"Bearer ".concat(c)}:{},...l?{Authorization:"Token ".concat(l)}:{},...null!=a?a:{}},body:o?JSON.stringify(o):void 0,mode:r};if(s){let e=new URL(t.startsWith("http")?t:"".concat(window.location.origin).concat(t));for(let[t,n]of Object.entries(s))e.searchParams.append(t,String(n));t=e.toString()}let p=await fetch(t,d);if(500===p.status||u&&!p.ok){let e=t.replace(/\?.*$/,"?hidden_for_logging");console.error("[jsonFetch] Request failed!");let n=await p.text();throw console.error("[jsonFetch] Response text:",n),new i("Request failed for ".concat(d.method," ").concat(e,": ").concat(p.status," ").concat(p.statusText,": ").concat(n),p.status)}return await p.json()}async function a(e,t){return await o({...(0,r.V)(e),body:t,method:"POST"})}function s(e,t){if(e instanceof i)console.warn(t);else throw e}},97708:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(15858),i=n(39833),o=n(11161),a=n(14224);function s(e){return(0,o.W)()&&(0,r.ob)()===r.t4.Mobile?{url:new URL(e,function(){let e=a.env.NEXT_PUBLIC_REFLECT_ENDPOINT;return(0,i.Ee)(e),e}()).href,mode:"cors"}:{url:e,mode:void 0}}},18612:function(e,t){t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(t=>{setTimeout(t,e)})}},99321:function(e,t,n){n.d(t,{_A:function(){return o},b9:function(){return s},nL:function(){return c},w7:function(){return a}});var r=n(67645),i=n(36556);async function o(e){let t=await (0,i.lI)();return fetch("/api/auth/client-token",{method:"POST",headers:{Authorization:"Firebase ".concat(t),"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({client_token:e,id_token:t})})}function a(){window.location.href="/sign-out.html"}async function s(e){let{email:t,authType:n}=e;try{return{otpTokenId:(await (0,r.C8)("/api/auth/otp/send",{email:t,auth_type:n})).otp_token_id}}catch(e){if(e instanceof r.ZE&&404===e.status)return{otpTokenId:null};throw e}}async function c(e){let{email:t,otpToken:n,otpTokenId:i}=e;return{accessToken:(await (0,r.C8)("/api/auth/otp/validate",{email:t,otp_token:n,otp_token_id:i})).access_token}}},36556:function(e,t,n){n.d(t,{$Q:function(){return p},AZ:function(){return f},Aj:function(){return o},g0:function(){return u},i1:function(){return s},lI:function(){return l},lN:function(){return h},nX:function(){return a},rc:function(){return c},tC:function(){return d}});var r=n(67645),i=n(60065);function o(e){return i.I8.onAuthStateChanged(e)}function a(){return new Promise(e=>{i.I8.currentUser?e(i.I8.currentUser):new Promise(e=>{let t=i.I8.onAuthStateChanged(n=>{t(),e(n)})}).then(e)})}function s(){return new Promise(e=>{i.I8.currentUser?e(i.I8.currentUser):new Promise(e=>{let t=i.I8.onAuthStateChanged(n=>{n&&(t(),e(n))})}).then(e)})}function c(){var e,t;return null!==(t=null===(e=i.I8.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null}async function l(){return(await s()).getIdToken()}async function u(){let e=await l();return{Authorization:"Firebase ".concat(e)}}async function d(e,t){return f({url:e,body:t,method:"POST"})}async function p(e,t){return f({url:e,method:"GET",searchParams:t})}async function h(e){return f({url:e,method:"DELETE"})}async function f(e){let t=await u();return await (0,r.AC)({...e,headers:{...t,...e.headers}})}},33964:function(e,t,n){n.d(t,{CG:function(){return v},Mo:function(){return x},Oh:function(){return w},PR:function(){return g},V5:function(){return y},gh:function(){return k},mD:function(){return b},sL:function(){return _},tU:function(){return j},xH:function(){return N}});var r=n(6046),i=n(53414),o=n(89300),a=n.n(o),s=n(24465),c=n.n(s),l=n(32137),u=n(94242),d=n(18612),p=n(77956),h=n(71157),f=n(60065),m=n(36556);function g(e){let t=(0,r.DU)({db:f.db,userId:e});return p.RZ.getDoc(t)}async function x(e){let t=await (0,m.i1)(),n=(0,r.DU)({db:f.db,userId:t.uid});return(0,i.onSnapshot)(n,n=>{let r=n.data();r&&e(t,r)},async t=>{console.error("[onUserSnapshot] Error:",t),(0,h.Tb)(t),await (0,d.Z)(1e3),console.log("[onUserSnapshot] Trying again..."),x(e)})}async function y(e){return v((await (0,m.i1)()).uid,e)}async function v(e,t){let n={backlink_created:t.backlinkCreated,book_synced:t.bookSynced,chrome_extension_installed:t.chromeExtensionInstalled,credential_auth:t.credentialAuth,graph_created:t.graphCreated,link_created:t.linkCreated,meeting_added:t.meetingAdded,onboarded:t.onboarded,onboarding_add_meeting_ignored:t.onboardingAddMeetingIgnored,onboarding_backlink_ignored:t.onboardingBacklinkIgnored,onboarding_links_ignored:t.onboardingLinksIgnored,shortcuts_opened:t.shortcutsOpened,tag_created:t.tagCreated},i=(0,r.DU)({db:f.db,userId:e}),o=c()(n,a());await p.RZ.setDoc(i,{traits:o},{merge:!0})}async function w(e){let t=(await (0,m.i1)()).uid,n=(0,r.DU)({db:f.db,userId:t}),i={date_format:e.dateFormat,time_format:e.timeFormat,week_start:e.weekStart,spell_check:e.spellCheck,labs:e.labs,transcription_prompt:e.transcriptionPrompt,transcription_language:e.transcriptionLanguage,transcription_format:e.transcriptionFormat,ai_provider:e.aiProvider,openai_api_key_excerpt:e.openaiApiKeyExcerpt,anthropic_api_key_excerpt:e.anthropicApiKeyExcerpt},o=c()(i,a());await p.RZ.setDoc(n,{preferences:o},{merge:!0})}async function b(e){let{openaiApiKey:t,anthropicApiKey:n}=e;return await (0,m.AZ)({url:"/api/users/me/internal-preferences",method:"PUT",body:{openai_api_key:t,anthropic_api_key:n}})}async function j(e,t){let n=p.IG.ref(f.tO,"users/".concat(e,"/photo"));await p.IG.uploadBytes(n,t,{contentType:t.type});let r=await p.IG.getDownloadURL(n);return f.I8.currentUser&&await p.lX.updateProfile(f.I8.currentUser,{photoURL:r}),r}async function k(e){f.I8.currentUser&&await p.lX.updateProfile(f.I8.currentUser,{displayName:e})}function _(e){var t;return{dateFormat:(0,u.g)(l.t6,null==e?void 0:e.date_format),timeFormat:(0,u.g)(l.zt,null==e?void 0:e.time_format),weekStart:(0,u.g)(l.L8,null==e?void 0:e.week_start),spellCheck:null==e?void 0:e.spell_check,labs:null==e?void 0:e.labs,transcriptionPrompt:null==e?void 0:e.transcription_prompt,transcriptionLanguage:null==e?void 0:e.transcription_language,transcriptionFormat:null==e?void 0:e.transcription_format,aiProvider:null==e?void 0:e.ai_provider,openaiApiKeyExcerpt:null==e?void 0:e.openai_api_key_excerpt,anthropicApiKeyExcerpt:null!==(t=null==e?void 0:e.anthropic_api_key_excerpt)&&void 0!==t?t:void 0}}function N(e){return{backlinkCreated:e.backlink_created,bookSynced:e.book_synced,chromeExtensionInstalled:e.chrome_extension_installed,credentialAuth:e.credential_auth,graphCreated:e.graph_created,linkCreated:e.link_created,meetingAdded:e.meeting_added,onboarded:e.onboarded,onboardingAddMeetingIgnored:e.onboarding_add_meeting_ignored,onboardingBacklinkIgnored:e.onboarding_backlink_ignored,onboardingLinksIgnored:e.onboarding_links_ignored,shortcutsOpened:e.shortcuts_opened,tagCreated:e.tag_created}}},77956:function(e,t,n){n.d(t,{IG:function(){return o},RZ:function(){return r},lX:function(){return i}}),n(1839);var r=n(53414),i=n(86416),o=n(91229)},30234:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(1839),i=n(78989);function o(){var e;return null!==(e=(0,r.C6)()[0])&&void 0!==e?e:(0,r.ZF)(i.vc,void 0)}},83085:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(86416),i=n(78989);function o(e){let t=(0,r.getAuth)(e);return i.i9&&!t.emulatorConfig&&(0,r.connectAuthEmulator)(t,"http://".concat(i.i9),{disableWarnings:!0}),t}},78989:function(e,t,n){n.d(t,{Cj:function(){return c},i9:function(){return s},vc:function(){return u}});var r,i=n(91950),o=n(14224);let a='{"apiKey":"AIzaSyD5tmpwG6ZbTQcMznYMf4_YQgVBqPtfc2w","databaseURL":"https://reflect-prod.firebaseio.com","projectId":"reflect-prod","storageBucket":"reflect-prod.appspot.com","messagingSenderId":"188725225641","appId":"1:188725225641:web:93e4f14c15713f2372a1b8","measurementId":"G-TDJCZM4HVX"}',s=o.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST,c=o.env.NEXT_PUBLIC_FIRESTORE_EMULATOR_HOST;if(!a)throw Error("missing NEXT_PUBLIC_FIREBASE_AUTH_JSON env var");let l=JSON.parse(a),u={authDomain:null===(r=(0,i.J)())||void 0===r?void 0:r.location.host,...l,clientID:"188725225641-n0tkosc6bsjc5lponcr9sjec1ifn38b2.apps.googleusercontent.com",appleScopes:["email","name"],googleScopes:["email","profile"]}},48851:function(e,t,n){n.d(t,{t:function(){return o}});var r=n(53414),i=n(78989);function o(e){let t=(0,r.initializeFirestore)(e,{});if(i.Cj){let[e,n]=i.Cj.split(":");(0,r.connectFirestoreEmulator)(t,e,Number(n))}return t}},72116:function(e,t,n){n.d(t,{h:function(){return i}});var r=n(91229);function i(e){let t=(0,r.getStorage)(e);return t.maxUploadRetryTime=0,t}},60065:function(e,t,n){n.d(t,{I8:function(){return u},db:function(){return l},tO:function(){return d},vc:function(){return s.vc}});var r=n(30234),i=n(83085),o=n(48851),a=n(72116),s=n(78989);let c=(0,r.a)(),l=(0,o.t)(c),u=(0,i.g)(c),d=(0,a.h)(c)},15858:function(e,t,n){var r,i;n.d(t,{HM:function(){return s},Ky:function(){return l},d:function(){return o},ob:function(){return c},qx:function(){return a},t4:function(){return r}}),(i=r||(r={})).App="app",i.Web="web",i.Mobile="mobile";let o=()=>void 0!==window.electron,a=()=>navigator.userAgent.match(/iphone/i),s=()=>navigator.userAgent.match(/ipad/i);function c(){return o()?"app":"web"}function l(){return a()?"iphone":s()?"ipad":"browser"}},71157:function(e,t,n){n.d(t,{Tb:function(){return u},fv:function(){return m},sU:function(){return l},uT:function(){return d}});var r=n(98454),i=n(65632),o=n.n(i),a=n(11161),s=n(7947),c=n(15858);function l(e,t){r.sU(e,f(t))}function u(e,t){let n=h(t);(0,s.Y8)()||console.error(e,n.extra),r.Tb(e,n),p(t)}function d(e,t){let n=h(t);(0,s.Y8)()||console.warn(e,n.extra),r.uT(e,n),p(t)}async function p(e){(null==e?void 0:e.flush)&&await r.yl(2e3)}function h(e){var t;let n=null==e?void 0:e.tags,r=null==e?void 0:e.level;return{extra:o()(null!==(t=null==e?void 0:e.extra)&&void 0!==t?t:{},f),level:r,tags:n}}function f(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return"Unable to serialize ".concat(e,": ").concat(t)}}function m(e){return async function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];try{return await e(...n)}catch(e){throw u(e),e}}}r.YA("platform",(0,c.ob)()),r.YA("agent",(0,c.Ky)()),r.YA("capacitor",(0,a.W)())}}]);