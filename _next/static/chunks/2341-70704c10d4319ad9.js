!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="98950221-1534-4500-8aa1-70188eb4822e",e._sentryDebugIdIdentifier="sentry-dbid-98950221-1534-4500-8aa1-70188eb4822e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2341],{63722:function(e,t,i){i.d(t,{e:function(){return o}});var n=i(60893),s=i(41466);class o{async dispose(){this.keyboardView.dispose(),await this.keyboardToolbarView.dispose()}constructor(){this.keyboardView=new s.q,this.keyboardToolbarView=new n.q}}},42104:function(e,t,i){i.d(t,{F0:function(){return l},l3:function(){return d},ze:function(){return c},zz:function(){return u}});var n=i(11527),s=i(50959),o=i(43884),r=i(63722);let a=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,i=(0,o.D)(()=>new r.e,[]);return(0,n.jsx)(a.Provider,{value:i,children:t})};function d(){let e=(0,s.useContext)(a);if(!e)throw Error("useCapacitorView must be used within a CapacitorViewProvider");return e}function c(){let{keyboardView:e}=d();return e}function u(){let{keyboardToolbarView:e}=d();return e}},79978:function(e,t,i){i.d(t,{ze:function(){return n.ze},zz:function(){return n.zz}}),i(63722);var n=i(42104);i(60893),i(41466)},60893:function(e,t,i){i.d(t,{q:function(){return y}});var n=i(15767),s=i(13061),o=i(69971),r=i(31223),a=i.n(r),l=i(25674),d=i.n(l),c=i(44838),u=i(90708);class h extends u.Uw{setItems(){}show(){}hide(){}getHasExternalKeyboard(){return Promise.resolve({isConnected:!1})}}let b=(0,u.fo)("KeyboardToolbar",{web:new h});class y{async dispose(){for(let e of this.listeners)(await Promise.resolve(e))()}observeEditor(){this.listeners.push((0,c.reaction)(()=>{let{canIndent:e,canDedent:t,canMoveUp:i,canMoveDown:n}=this;return{canIndent:e,canDedent:t,canMoveUp:i,canMoveDown:n}},e=>this.updateToolbar(e),{fireImmediately:!0,equals:a()}))}async observePlugin(){let e=await b.getHasExternalKeyboard();this.setHasExternalKeyboard(e.isConnected),this.listeners.push((await b.addListener("action",e=>{this.handleCommand(e)})).remove),this.listeners.push((await b.addListener("visibility",e=>{this.setIsVisible(e.isVisible)})).remove),this.listeners.push((await b.addListener("externalKeyboard",e=>{this.setHasExternalKeyboard(e.isConnected)})).remove)}setSelectionOptions(e){this.canIndent=e.canIndent,this.canDedent=e.canDedent,this.canMoveUp=e.canMoveUp,this.canMoveDown=e.canMoveDown,this.selectedSubject=e.selectedSubject}setIsVisible(e){this.isVisible=e}setHasExternalKeyboard(e){this.hasExternalKeyboard=e}show(e){this.editorRef=e,b.show()}hide(){b.hide()}updateToolbar(e){b.setItems({items:function(e){let{canIndent:t,canDedent:i,canMoveUp:n,canMoveDown:s}=e;return[{type:"action",icon:"slash",action:"insertCommand"},{type:"action",icon:"bullet-list",action:"insertBullet"},{type:"action",icon:"todo-list",action:"insertTask"},{type:"action",icon:"backlink",action:"insertBacklink"},{type:"action",icon:"hashtag",action:"insertTag"},{type:"action",icon:"outdent",action:"outdent",disabled:!i},{type:"action",icon:"indent",action:"indent",disabled:!t},{type:"action",icon:"move-up",action:"moveUp",disabled:!n,canHide:!0},{type:"action",icon:"move-down",action:"moveDown",disabled:!s,canHide:!0},{type:"action",icon:"image",action:"insertImage"}]}(e)})}handleCommand(e){var t;let{action:i}=e,n=null===(t=this.editorRef)||void 0===t?void 0:t.current;switch(i){case"insertCommand":null==n||n.insertText("/");break;case"insertBullet":null==n||n.turnToBulletList();break;case"insertTask":null==n||n.turnToTaskList();break;case"insertBacklink":null==n||n.insertText("[[");break;case"insertTag":null==n||n.insertText("#");break;case"indent":null==n||n.indentListItem();break;case"outdent":null==n||n.dedentListItem();break;case"moveUp":null==n||n.moveUpListItem();break;case"moveDown":null==n||n.moveDownListItem();break;case"insertImage":this.insertImage();break;case"dismiss":null==n||n.blur()}}async insertImage(){let e=this.editorRef.current,t=[];try{t=(await s.V1.pickImages({width:1e3,quality:80,presentationStyle:"popover"})).photos}catch(e){console.warn(e)}for(let i of t){let{path:t}=i;if(!t)continue;let n=await o.fy.readFile({path:t}),s=d()(t.split("/")),r=await fetch("data:text/plain;base64,"+n.data),a=new File([await r.arrayBuffer()],s);null==e||e.uploadImages([a])}}constructor(){this.canIndent=!1,this.canDedent=!1,this.canMoveUp=!1,this.canMoveDown=!1,this.selectedSubject=!1,this.isVisible=!1,this.hasExternalKeyboard=!1,this.editorRef={current:null},this.listeners=[],(0,c.makeObservable)(this),this.observeEditor(),this.observePlugin()}}(0,n.gn)([c.observable],y.prototype,"canIndent",void 0),(0,n.gn)([c.observable],y.prototype,"canDedent",void 0),(0,n.gn)([c.observable],y.prototype,"canMoveUp",void 0),(0,n.gn)([c.observable],y.prototype,"canMoveDown",void 0),(0,n.gn)([c.observable],y.prototype,"selectedSubject",void 0),(0,n.gn)([c.observable],y.prototype,"isVisible",void 0),(0,n.gn)([c.observable],y.prototype,"hasExternalKeyboard",void 0),(0,n.gn)([c.action],y.prototype,"setSelectionOptions",null),(0,n.gn)([c.action],y.prototype,"setIsVisible",null),(0,n.gn)([c.action],y.prototype,"setHasExternalKeyboard",null)},41466:function(e,t,i){i.d(t,{q:function(){return a}});var n=i(15767),s=i(90708),o=i(6268),r=i(44838);class a{dispose(){this.listeners.forEach(e=>e.remove())}hasKeyboardPlugin(){return s.dV.isPluginAvailable("Keyboard")}setHeight(e){this.keyboardHeight={type:"exact",value:e}}setStatus(e){this.status=e}get wantsSpacer(){return"showing"===this.status||"visible"===this.status}get isHidden(){return"hidden"===this.status||"hiding"===this.status}async observeKeyboard(){this.hasKeyboardPlugin()&&this.listeners.push(await o.N1.addListener("keyboardWillShow",e=>{this.setHeight(e.keyboardHeight),this.setStatus("showing")}),await o.N1.addListener("keyboardDidShow",e=>{this.setHeight(e.keyboardHeight),this.setStatus("visible")}),await o.N1.addListener("keyboardWillHide",()=>{this.setStatus("hiding")}),await o.N1.addListener("keyboardDidHide",()=>{this.setStatus("hidden")}))}constructor(){this.listeners=[],this.keyboardHeight={type:"approx",value:380},this.status="hidden",(0,r.makeObservable)(this),this.observeKeyboard()}}(0,n.gn)([r.observable],a.prototype,"keyboardHeight",void 0),(0,n.gn)([r.observable],a.prototype,"status",void 0),(0,n.gn)([r.action],a.prototype,"setHeight",null),(0,n.gn)([r.action],a.prototype,"setStatus",null),(0,n.gn)([r.computed],a.prototype,"wantsSpacer",null),(0,n.gn)([r.computed],a.prototype,"isHidden",null)},79819:function(e,t,i){i.d(t,{L:function(){return c},X:function(){return u}});var n=i(11527),s=i(4814),o=i(72811),r=i(50959),a=i(79978),l=i(11161);let d=(0,r.createContext)(void 0);function c(){return(0,r.useContext)(d)}let u=e=>(0,l.W)()?(0,n.jsx)(h,{...e}):(0,n.jsx)(b,{...e}),h=(0,o.Pi)(e=>{let{children:t,className:i,...o}=e,l=(0,a.ze)(),c=(0,r.useRef)(null);return(0,n.jsx)(d.Provider,{value:c,children:(0,n.jsxs)("div",{...o,className:(0,s.Z)("h-full overflow-y-auto",i),ref:c,children:[t,l.wantsSpacer&&(0,n.jsx)("div",{style:{height:"".concat(l.keyboardHeight.value,"px")}})]})})}),b=e=>{let{children:t,className:i,...o}=e;return(0,n.jsx)("div",{...o,className:(0,s.Z)("h-full overflow-y-auto",i),children:t})}},5992:function(e,t,i){i.d(t,{S:function(){return u}});var n=i(11527),s=i(4814),o=i(79978),r=i(11161),a=i(43884),l=i(15767),d=i(44838);class c{setDiv(e){this.divRef=e}observeBodyStyle(){let e=window.document.body,t=new MutationObserver(()=>{this.setBodyHeight(e.style.height||null)});t.observe(e,{attributes:!0,attributeFilter:["style"]}),this.listeners.push(()=>t.disconnect())}setBodyHeight(e){this.bodyHeight=e}dispose(){for(let e of this.listeners)e()}constructor({keyboardToolbarView:e}){this.divRef=null,this.bodyHeight=null,this.listeners=[],this.keyboardToolbarView=e,(0,d.makeObservable)(this),this.observeBodyStyle(),this.listeners.push((0,d.reaction)(()=>({bodyHeight:this.bodyHeight,hasExternalKeyboard:this.keyboardToolbarView.hasExternalKeyboard}),e=>{var t;let{bodyHeight:i,hasExternalKeyboard:n}=e;null===(t=this.divRef)||void 0===t||t.style.setProperty("height",(n?null:i)||"100vh")},{fireImmediately:!0}))}}function u(e){return(0,r.W)()?(0,n.jsx)(h,{...e}):(0,n.jsx)(b,{...e})}function h(e){let{as:t,children:i,style:r,className:l,...d}=e,u=(0,o.zz)(),h=(0,a.D)(()=>new c({keyboardToolbarView:u}),[u]);return(0,n.jsx)(t||"div",{...d,className:(0,s.Z)("fixed top-0 right-0 left-0",l),style:{...r,height:"100vh"},ref:e=>h.setDiv(e),children:i})}function b(e){let{as:t,children:i,className:o,...r}=e;return(0,n.jsx)(t||"div",{...r,className:(0,s.Z)("fixed inset-0",o),children:i})}(0,l.gn)([d.observable],c.prototype,"keyboardToolbarView",void 0),(0,l.gn)([d.observable],c.prototype,"divRef",void 0),(0,l.gn)([d.observable],c.prototype,"bodyHeight",void 0),(0,l.gn)([d.action],c.prototype,"setDiv",null),(0,l.gn)([d.action],c.prototype,"setBodyHeight",null)},1009:function(e,t,i){i.d(t,{r:function(){return a}});var n=i(11527),s=i(91307),o=i(4814);i(50959);var r=i(21240);let a=e=>{let{open:t=!0,onClose:i,children:a}=e;return(0,n.jsx)(r.y,{in:t,children:(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex select-none items-center justify-center overflow-y-auto bg-gradient-to-b from-bluegray-900 to-near-black px-4 pt-4 pb-20",role:"modal",children:[i&&(0,n.jsx)("nav",{className:"absolute right-0 top-0 px-4 py-4",children:(0,n.jsxs)("button",{role:"button","aria-label":"Close",onClick:i,className:"flex cursor-pointer items-center space-x-2 text-sm text-near-white outline-none transition hover:text-gray-900",children:[(0,n.jsx)("span",{children:"Close"}),(0,n.jsx)("span",{className:"rounded-md bg-dark-black-800 px-1.5 py-0.5 text-xs",children:"Esc"}),(0,n.jsx)(s.Z,{height:15,width:15})]})}),(0,n.jsx)("div",{className:(0,o.Z)(["inline-block align-bottom","relative px-4 py-4","transform transition-all","text-gray-900"]),role:"dialog",children:a})]})})}},21240:function(e,t,i){i.d(t,{y:function(){return o}});var n=i(11527);i(50959);var s=i(57162);let o=e=>{let{in:t,children:i,duration:o=120}=e,r={transition:"opacity ".concat(o,"ms"),opacity:0},a={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{}};return(0,n.jsx)(s.ZP,{timeout:o,in:t,mountOnEnter:!0,unmountOnExit:!0,children:e=>(0,n.jsx)("div",{style:{...r,...a[e]},children:i})})}},43884:function(e,t,i){i.d(t,{D:function(){return s}});var n=i(50959);function s(e,t){let i=(0,n.useRef)(null),s=(0,n.useMemo)(()=>{var t,n;null===(t=i.current)||void 0===t||t.dispose();let s=e();return i.current=s,null===(n=s.attach)||void 0===n||n.call(s),s},t);return(0,n.useEffect)(()=>()=>{var e;null===(e=i.current)||void 0===e||e.dispose(),i.current=null},[]),s}},53097:function(e,t,i){i.d(t,{cn:function(){return o}});var n=i(4814),s=i(47899);function o(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,s.m)((0,n.W)(t))}}}]);