import{c as _e,d as xe,e as T,f as J,g as be,h as Re,i as P}from"/_feather/build/_shared/chunk-23UC2UNS.js";import{b as f,c as R,d as Ut,e as we,f as Se}from"/_feather/build/_shared/chunk-WKCTKT6D.js";var ke=R(W=>{"use strict";W.parse=jt;W.serialize=Ft;var Pt=decodeURIComponent,It=encodeURIComponent,I=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function jt(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var r={},n=e||{},o=t.split(";"),s=n.decode||Pt,a=0;a<o.length;a++){var i=o[a],u=i.indexOf("=");if(!(u<0)){var l=i.substring(0,u).trim();if(r[l]==null){var c=i.substring(u+1,i.length).trim();c[0]==='"'&&(c=c.slice(1,-1)),r[l]=Lt(c,s)}}}return r}function Ft(t,e,r){var n=r||{},o=n.encode||It;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!I.test(t))throw new TypeError("argument name is invalid");var s=o(e);if(s&&!I.test(s))throw new TypeError("argument val is invalid");var a=t+"="+s;if(n.maxAge!=null){var i=n.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(i)}if(n.domain){if(!I.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!I.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite){var u=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(u){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a}function Lt(t,e){try{return e(t)}catch{return t}}});function j(t,e){!t&&!ve[e]&&(ve[e]=!0,console.warn(e))}var ve,X=f(()=>{ve={}});async function qt(t,e,r){let n=zt(e);return r.length>0&&(n=await t(n,r[0])),n}async function Vt(t,e,r){if(r.length>0){for(let n of r){let o=await t(e,n);if(o!==!1)return Ce(o)}return null}return Ce(e)}function zt(t){return btoa(Bt(encodeURIComponent(JSON.stringify(t))))}function Ce(t){try{return JSON.parse(decodeURIComponent(Nt(atob(t))))}catch{return{}}}function Nt(t){let e=t.toString(),r="",n=0,o,s;for(;n<e.length;)o=e.charAt(n++),/[\w*+\-./@]/.exec(o)?r+=o:(s=o.charCodeAt(0),s<256?r+="%"+Ee(s,2):r+="%u"+Ee(s,4).toUpperCase());return r}function Ee(t,e){let r=t.toString(16);for(;r.length<e;)r="0"+r;return r}function Bt(t){let e=t.toString(),r="",n=0,o,s;for(;n<e.length;){if(o=e.charAt(n++),o==="%"){if(e.charAt(n)==="u"){if(s=e.slice(n+1,n+5),/^[\da-f]{4}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=5;continue}}else if(s=e.slice(n,n+2),/^[\da-f]{2}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=2;continue}}r+=o}return r}function $t(t,e){j(!e,`The "${t}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}var F,De,k,L=f(()=>{F=we(ke());X();De=({sign:t,unsign:e})=>(r,n={})=>{let{secrets:o,...s}={secrets:[],path:"/",sameSite:"lax",...n};return $t(r,s.expires),{get name(){return r},get isSigned(){return o.length>0},get expires(){return typeof s.maxAge<"u"?new Date(Date.now()+s.maxAge*1e3):s.expires},async parse(a,i){if(!a)return null;let u=(0,F.parse)(a,{...s,...i});return r in u?u[r]===""?"":await Vt(e,u[r],o):null},async serialize(a,i){return(0,F.serialize)(r,a===""?"":await qt(t,a,o),{...s,...i})}}},k=t=>t!=null&&typeof t.name=="string"&&typeof t.isSigned=="boolean"&&typeof t.parse=="function"&&typeof t.serialize=="function"});function v(t){let e=unescape(encodeURIComponent(t));return Uint8Array.from(e,(r,n)=>e.charCodeAt(n))}function Q(t){let e=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(e))}function C(...t){let e=new Uint8Array(t.reduce((n,o)=>n+o.length,0)),r=0;for(let n of t)e.set(n,r),r+=n.length;return e}function Oe(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var Y=f(()=>{});function Te(t){return t instanceof Uint8Array?e=>t[e]:t}function G(t,e,r,n,o){let s=Te(t),a=Te(r);for(let i=0;i<o;++i)if(s(e+i)!==a(n+i))return!1;return!0}function Kt(t){let e=new Array(256).fill(t.length);if(t.length>1)for(let r=0;r<t.length-1;r++)e[t[r]]=t.length-1-r;return e}var w,x,q,Ae,Me,He=f(()=>{Y();w=Symbol("Match"),x=class{constructor(e){this._lookbehind=new Uint8Array,typeof e=="string"?this._needle=e=v(e):this._needle=e,this._lastChar=e[e.length-1],this._occ=Kt(e)}feed(e){let r=0,n,o=[];for(;r!==e.length;)[r,...n]=this._feed(e,r),o.push(...n);return o}end(){let e=this._lookbehind;return this._lookbehind=new Uint8Array,e}_feed(e,r){let n=[],o=-this._lookbehind.length;if(o<0){for(;o<0&&o<=e.length-this._needle.length;){let s=this._charAt(e,o+this._needle.length-1);if(s===this._lastChar&&this._memcmp(e,o,this._needle.length-1))return o>-this._lookbehind.length&&n.push(this._lookbehind.slice(0,this._lookbehind.length+o)),n.push(w),this._lookbehind=new Uint8Array,[o+this._needle.length,...n];o+=this._occ[s]}if(o<0)for(;o<0&&!this._memcmp(e,o,e.length-o);)o++;if(o>=0)n.push(this._lookbehind),this._lookbehind=new Uint8Array;else{let s=this._lookbehind.length+o;return s>0&&(n.push(this._lookbehind.slice(0,s)),this._lookbehind=this._lookbehind.slice(s)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+e.length),(a,i)=>this._charAt(e,i-this._lookbehind.length)),[e.length,...n]}}for(o+=r;o<=e.length-this._needle.length;){let s=e[o+this._needle.length-1];if(s===this._lastChar&&e[o]===this._needle[0]&&G(this._needle,0,e,o,this._needle.length-1))return o>r&&n.push(e.slice(r,o)),n.push(w),[o+this._needle.length,...n];o+=this._occ[s]}if(o<e.length){for(;o<e.length&&(e[o]!==this._needle[0]||!G(e,o,this._needle,0,e.length-o));)++o;o<e.length&&(this._lookbehind=e.slice(o))}return o>0&&n.push(e.slice(r,o<e.length?o:e.length)),[e.length,...n]}_charAt(e,r){return r<0?this._lookbehind[this._lookbehind.length+r]:e[r]}_memcmp(e,r,n){return G(this._charAt.bind(this,e),r,this._needle,0,n)}},q=class{constructor(e,r){this._readableStream=r,this._search=new x(e)}async*[Symbol.asyncIterator](){let e=this._readableStream.getReader();try{for(;;){let n=await e.read();if(n.done)break;yield*this._search.feed(n.value)}let r=this._search.end();r.length&&(yield r)}finally{e.releaseLock()}}},Ae=Symbol("End of Queue"),Me=class{constructor(e){this._chunksQueue=[],this._closed=!1,this._search=new x(e)}push(...e){if(this._closed)throw new Error("cannot call push after close");this._chunksQueue.push(...e),this._notify&&this._notify()}close(){if(this._closed)throw new Error("close was already called");this._closed=!0,this._chunksQueue.push(Ae),this._notify&&this._notify()}async*[Symbol.asyncIterator](){for(;;){let r;for(;!(r=this._chunksQueue.shift());)await new Promise(n=>this._notify=n),this._notify=void 0;if(r===Ae)break;yield*this._search.feed(r)}let e=this._search.end();e.length&&(yield e)}}});function Wt(t){let e=t.split(";").map(n=>n.trim());if(e.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(e)+"`");let r={};for(let n of e){let o=n.split("=",2);if(o.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+t+"`");let[s,a]=o;if(a[0]==='"'&&a[a.length-1]==='"')r[s]=a.slice(1,-1).replace(/\\"/g,'"');else if(a[0]!=='"'&&a[a.length-1]!=='"')r[s]=a;else if(a[0]==='"'&&a[a.length-1]!=='"'||a[0]!=='"'&&a[a.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+t+"`")}if(!r.name)throw new Error("malformed content-disposition header: missing field name in `"+t+"`");return r}function Xt(t){let e=[],r=!1,n;for(;typeof(n=t.shift())<"u";){let o=n.indexOf(":");if(o===-1)throw new Error("malformed multipart-form header: missing colon");let s=n.slice(0,o).trim().toLowerCase(),a=n.slice(o+1).trim();switch(s){case"content-disposition":r=!0,e.push(...Object.entries(Wt(a)));break;case"content-type":e.push(["contentType",a])}}if(!r)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(e)}async function Qt(t,e){let r=!0,n=!1,o=[[]],s=new x(A);for(;;){let a=await t.next();if(a.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(r&&a.value!==w&&Oe(a.value.slice(0,2),Ue))return[void 0,new Uint8Array];let i;if(a.value!==w)i=a.value;else if(!n)i=e;else throw new Error("malformed multipart-form data: unexpected boundary");if(!i.length)continue;r&&(r=!1);let u=s.feed(i);for(let[l,c]of u.entries()){let m=c===w;if(!(!m&&!c.length)){if(n&&m)return u.push(s.end()),[o.filter(h=>h.length).map(Jt).map(Q),C(...u.slice(l+1).map(h=>h===w?A:h))];(n=m)?o.push([]):o[o.length-1].push(c)}}}}async function*Pe(t,e){let r=C(Ue,v(e)),n=new q(r,t)[Symbol.asyncIterator]();for(;;){let s=await n.next();if(s.done)return;if(s.value===w)break}let o=new x(A);for(;;){let l=function(p){let S=[];for(let U of o.feed(p))u&&S.push(A),(u=U===w)||S.push(U);return C(...S)},[s,a]=await Qt(n,r);if(!s)return;async function i(){let p=await n.next();if(p.done)throw new Error("malformed multipart-form data: unexpected end of stream");return p}let u=!1,c=!1;async function m(){let p=await i(),S;if(p.value!==w)S=p.value;else if(!u)S=A;else return c=!0,{value:o.end()};return{value:l(S)}}let h=[{value:l(a)}];for(yield{...Xt(s),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){let p=h.shift();if(!p)break;if(p.value.length>0)return p}for(;;){if(c)return{done:c,value:void 0};let p=await m();if(p.value.length>0)return p}}}};!c;)h.push(await m())}}var Jt,Ue,A,Ie=f(()=>{He();Y();Jt=Function.prototype.apply.bind(C,void 0),Ue=v("--"),A=v(`\r
`)});function je(...t){return async e=>{for(let r of t){let n=await r(e);if(typeof n<"u"&&n!==null)return n}}}async function Fe(t,e){let r=t.headers.get("Content-Type")||"",[n,o]=r.split(/\s*;\s*boundary=/);if(!t.body||!o||n!=="multipart/form-data")throw new TypeError("Could not parse content as FormData.");let s=new FormData,a=Pe(t.body,o);for await(let i of a){if(i.done)break;typeof i.filename=="string"&&(i.filename=i.filename.split(/[/\\]/).pop());let u=await e(i);typeof u<"u"&&u!==null&&s.append(i.name,u)}return s}var Le=f(()=>{Ie();});async function V(t){return{message:t.message,stack:t.stack}}function Z(t){if(!t)return null;let e=Object.entries(t),r={};for(let[n,o]of e)T(o)?r[n]={...o,__type:"RouteErrorResponse"}:o instanceof Error?r[n]={message:o.message,stack:o.stack,__type:"Error"}:r[n]=o;return r}var ee=f(()=>{P();});function ze(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function _(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function te(t){return Yt.has(t)}function Ne(t){return te(t.status)}function Gt(t){return t!=null&&typeof t.then=="function"&&t._tracked===!0}function Be(t,e){let r=new TextEncoder;return new ReadableStream({async start(o){let s={},a=[];for(let[u,l]of Object.entries(t.data))Gt(l)?(s[u]=`${Zt}${u}`,(typeof l._data<"u"||typeof l._error<"u")&&a.push(u)):s[u]=l;o.enqueue(r.encode(JSON.stringify(s)+`

`));for(let u of a)qe(o,r,u,t.data[u]);let i=t.subscribe((u,l)=>{l&&qe(o,r,l,t.data[l])});await t.resolveData(e),i(),o.close()}})}function qe(t,e,r,n){"_error"in n?t.enqueue(e.encode("error:"+JSON.stringify({[r]:V(n._error)})+`

`)):t.enqueue(e.encode("data:"+JSON.stringify({[r]:n._data??null})+`

`))}var b,Ve,z,Yt,Zt,N=f(()=>{P();ee();b=(t,e={})=>{let r=typeof e=="number"?{status:e}:e,n=new Headers(r.headers);return n.has("Content-Type")||n.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),{...r,headers:n})},Ve=(t,e={})=>{let r=typeof e=="number"?{status:e}:e,n=new Headers(r.headers);return n.has("Content-Type")||n.set("Content-Type","application/json; charset=utf-8"),xe(t,{...r,headers:n})},z=(t,e=302)=>{let r=e;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let n=new Headers(r.headers);return n.set("Location",t),new Response(null,{...r,headers:n})};Yt=new Set([301,302,303,307,308]);Zt="__deferred_promise:"});function $e(t){return Object.keys(t).reduce((e,r)=>(e[r]=t[r].module,e),{})}var Ke=f(()=>{});var We=R((Ur,M)=>{"use strict";var E={decodeValues:!0,map:!1,silent:!1};function re(t){return typeof t=="string"&&!!t.trim()}function ne(t,e){var r=t.split(";").filter(re),n=r.shift().split("="),o=n.shift(),s=n.join("=");e=e?Object.assign({},E,e):E;try{s=e.decodeValues?decodeURIComponent(s):s}catch(i){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+s+"'. Set options.decodeValues to false to disable this feature.",i)}var a={name:o,value:s};return r.forEach(function(i){var u=i.split("="),l=u.shift().trimLeft().toLowerCase(),c=u.join("=");l==="expires"?a.expires=new Date(c):l==="max-age"?a.maxAge=parseInt(c,10):l==="secure"?a.secure=!0:l==="httponly"?a.httpOnly=!0:l==="samesite"?a.sameSite=c:a[l]=c}),a}function Je(t,e){if(e=e?Object.assign({},E,e):E,!t)return e.map?{}:[];if(t.headers&&t.headers["set-cookie"])t=t.headers["set-cookie"];else if(t.headers){var r=t.headers[Object.keys(t.headers).find(function(o){return o.toLowerCase()==="set-cookie"})];!r&&t.headers.cookie&&!e.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),t=r}if(Array.isArray(t)||(t=[t]),e=e?Object.assign({},E,e):E,e.map){var n={};return t.filter(re).reduce(function(o,s){var a=ne(s,e);return o[a.name]=a,o},n)}else return t.filter(re).map(function(o){return ne(o,e)})}function er(t){if(Array.isArray(t))return t;if(typeof t!="string")return[];var e=[],r=0,n,o,s,a,i;function u(){for(;r<t.length&&/\s/.test(t.charAt(r));)r+=1;return r<t.length}function l(){return o=t.charAt(r),o!=="="&&o!==";"&&o!==","}for(;r<t.length;){for(n=r,i=!1;u();)if(o=t.charAt(r),o===","){for(s=r,r+=1,u(),a=r;r<t.length&&l();)r+=1;r<t.length&&t.charAt(r)==="="?(i=!0,r=a,e.push(t.substring(n,s)),n=r):r=s+1}else r+=1;(!i||r>=t.length)&&e.push(t.substring(n,t.length))}return e}M.exports=Je;M.exports.parse=Je;M.exports.parseString=ne;M.exports.splitCookiesString=er});function Qe(t,e){return(e.errors?e.matches.slice(0,e.matches.findIndex(n=>e.errors[n.route.id])+1):e.matches).reduce((n,o)=>{let{id:s}=o.route,a=t.routes[s].module,i=e.loaderHeaders[s]||new Headers,u=e.actionHeaders[s]||new Headers,l=new Headers(a.headers?typeof a.headers=="function"?a.headers({loaderHeaders:i,parentHeaders:n,actionHeaders:u}):a.headers:void 0);return oe(u,l),oe(i,l),oe(n,l),l},new Headers)}function oe(t,e){let r=t.get("Set-Cookie");r&&(0,Xe.splitCookiesString)(r).forEach(o=>{e.append("Set-Cookie",o)})}var Xe,Ye=f(()=>{Xe=we(We());});function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw console.error("The following error is a bug in Remix; please open an issue! https://github.com/remix-run/remix/issues/new"),new Error(e)}var Ze=f(()=>{});function et(t){return t===y.Development||t===y.Production||t===y.Test}var y,tt=f(()=>{(function(t){t.Development="development",t.Production="production",t.Test="test"})(y||(y={}))});function rt(t,e){let r=_e(t,e);return r?r.map(n=>({params:n.params,pathname:n.pathname,route:n.route})):null}var nt=f(()=>{P();});async function ot({loadContext:t,action:e,params:r,request:n,routeId:o}){let s=await e({request:it(at(n)),context:t,params:r});if(s===void 0)throw new Error(`You defined an action for route "${o}" but didn't return anything from your \`action\` function. Please return a value or \`null\`.`);return _(s)?s:b(s)}async function st({loadContext:t,loader:e,params:r,request:n,routeId:o}){let s=await e({request:it(at(n)),context:t,params:r});if(s===void 0)throw new Error(`You defined a loader for route "${o}" but didn't return anything from your \`loader\` function. Please return a value or \`null\`.`);return ze(s)?s.init&&te(s.init.status||200)?z(new Headers(s.init.headers).get("Location"),s.init):s:_(s)?s:b(s)}function at(t){let e=new URL(t.url),r=e.searchParams.getAll("index");e.searchParams.delete("index");let n=[];for(let o of r)o&&n.push(o);for(let o of n)e.searchParams.append("index",o);return new Request(e.href,t)}function it(t){let e=new URL(t.url);return e.searchParams.delete("_data"),new Request(e.href,t)}var ut=f(()=>{N();});function lt(t){let e={};return Object.values(t).forEach(r=>{let n=r.parentId||"";e[n]||(e[n]=[]),e[n].push(r)}),e}function se(t,e="",r=lt(t)){return(r[e]||[]).map(n=>({...n,children:se(t,n.id,r)}))}function ae(t,e,r="",n=lt(t)){return(n[r]||[]).map(o=>{let a={hasErrorBoundary:e.v2_errorBoundary===!0?o.id==="root"||o.module.ErrorBoundary!=null:o.id==="root"||o.module.CatchBoundary!=null||o.module.ErrorBoundary!=null,id:o.id,path:o.path,loader:o.module.loader?i=>st({request:i.request,params:i.params,loadContext:i.context,loader:o.module.loader,routeId:o.id}):void 0,action:o.module.action?i=>ot({request:i.request,params:i.params,loadContext:i.context,action:o.module.action,routeId:o.id}):void 0,handle:o.module.handle};return o.index?{index:!0,...a}:{caseSensitive:o.caseSensitive,children:ae(t,e,o.id,n),...a}})}var ct=f(()=>{ut();});function ft(t){return t.replace(rr,e=>tr[e])}var tr,rr,dt=f(()=>{tr={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},rr=/[&><\u2028\u2029]/g});function ie(t){return ft(JSON.stringify(t))}var ht=f(()=>{dt();});async function nr(t,e,r,n,o){try{let s=await e.queryRoute(n,{routeId:r,requestContext:o});if(Ne(s)){let a=new Headers(s.headers);return a.set("X-Remix-Redirect",a.get("Location")),a.set("X-Remix-Status",s.status),a.delete("Location"),s.headers.get("Set-Cookie")!==null&&a.set("X-Remix-Revalidate","yes"),new Response(null,{status:204,headers:a})}if(J in s){let a=s[J],i=Be(a,n.signal),u=a.init||{},l=new Headers(u.headers);return l.set("Content-Type","text/remix-deferred"),u.headers=l,new Response(i,u)}return s}catch(s){if(_(s))return s.headers.set("X-Remix-Catch","yes"),s;let a=500,i=s;return T(s)&&(a=s.status,i=s.error||i),t!==y.Test&&!n.signal.aborted&&console.error(i),t===y.Development&&i instanceof Error?mt(i,a):mt(new Error("Unexpected Server Error"),a)}}function gt(t,e,r){let n=t[e]||t.root,o=T(r)&&(!r.error||r.status===404);return o&&n.module.CatchBoundary||!o&&n.module.ErrorBoundary||!n.parentId?n.id:gt(t,n.parentId,r)}function pt(t,e){if(!e.errors)return;let r={};for(let n of Object.keys(e.errors)){let o=e.errors[n],s=gt(t.routes,n,o);r[s]=o}e.errors=r}async function or(t,e,r,n,o){let s;try{s=await r.query(n,{requestContext:o})}catch(l){return!n.signal.aborted&&t!==y.Test&&console.error(l),new Response(null,{status:500})}if(_(s))return s;e.future.v2_errorBoundary!==!0&&pt(e,s);let a=Qe(e,s),i={manifest:e.assets,routeModules:$e(e.routes),staticHandlerContext:s,serverHandoffString:ie({state:{loaderData:s.loaderData,actionData:s.actionData,errors:Z(s.errors)},future:e.future,dev:e.dev}),future:e.future},u=e.entry.module.default;try{return await u(n,s.statusCode,a,i)}catch(l){s=Re(r.dataRoutes,s,l),e.future.v2_errorBoundary!==!0&&pt(e,s),i={...i,staticHandlerContext:s,serverHandoffString:ie({state:{loaderData:s.loaderData,actionData:s.actionData,errors:Z(s.errors)},future:e.future})};try{return await u(n,s.statusCode,a,i)}catch(c){return wt(c,t)}}}async function sr(t,e,r,n,o){try{let s=await e.queryRoute(n,{routeId:r,requestContext:o});return Ge(_(s),"Expected a Response to be returned from queryRoute"),s}catch(s){return _(s)?(s.headers.set("X-Remix-Catch","yes"),s):wt(s,t)}}async function mt(t,e){return b(await V(t),{status:e,headers:{"X-Remix-Error":"yes"}})}function wt(t,e){e!==y.Test&&console.error(t);let r="Unexpected Server Error";return e!==y.Production&&(r+=`

${String(t)}`),new Response(r,{status:500,headers:{"Content-Type":"text/plain"}})}var yt,St=f(()=>{P();Ke();ee();Ye();Ze();tt();nt();ct();N();ht();yt=(t,e)=>{let r=se(t.routes),n=ae(t.routes,t.future),o=et(e)?e:y.Production,s=be(n);return async function(i,u={}){let l=new URL(i.url),{unstable_dev:c}=t.future;if(e==="development"&&c!==!1&&l.pathname===(c===!0?"/__REMIX_ASSETS_MANIFEST":(c.remixRequestHandlerPath??"")+"/__REMIX_ASSETS_MANIFEST"))return i.method!=="GET"?new Response("Method not allowed",{status:405}):new Response(JSON.stringify(t.assets),{status:200,headers:{"Content-Type":"application/json"}});let m=rt(r,l.pathname),h;if(l.searchParams.has("_data")){let p=l.searchParams.get("_data");if(h=await nr(o,s,p,i,u),t.entry.module.handleDataRequest){let S=m.find(U=>U.route.id==p);h=await t.entry.module.handleDataRequest(h,{context:u,params:S.params,request:i})}}else m&&m[m.length-1].route.module.default==null?h=await sr(o,s,m.slice(-1)[0].route.id,i,u):h=await or(o,t,s,i,u);return i.method==="HEAD"?new Response(null,{headers:h.headers,status:h.status,statusText:h.statusText}):h}}});function ue(t){return`__flash_${t}__`}function le(t){j(t.isSigned,`The "${t.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://remix.run/utils/cookies#signing-cookies for more information.`)}var H,_t,xt,ce=f(()=>{L();X();H=(t={},e="")=>{let r=new Map(Object.entries(t));return{get id(){return e},get data(){return Object.fromEntries(r)},has(n){return r.has(n)||r.has(ue(n))},get(n){if(r.has(n))return r.get(n);let o=ue(n);if(r.has(o)){let s=r.get(o);return r.delete(o),s}},set(n,o){r.set(n,o)},flash(n,o){r.set(ue(n),o)},unset(n){r.delete(n)}}},_t=t=>t!=null&&typeof t.id=="string"&&typeof t.data<"u"&&typeof t.has=="function"&&typeof t.get=="function"&&typeof t.set=="function"&&typeof t.flash=="function"&&typeof t.unset=="function",xt=t=>({cookie:e,createData:r,readData:n,updateData:o,deleteData:s})=>{let a=k(e)?e:t(e?.name||"__session",e);return le(a),{async getSession(i,u){let l=i&&await a.parse(i,u),c=l&&await n(l);return H(c||{},l||"")},async commitSession(i,u){let{id:l,data:c}=i;return l?await o(l,c,a.expires):l=await r(c,a.expires),a.serialize(l,u)},async destroySession(i,u){return await s(i.id),a.serialize("",{...u,expires:new Date(0)})}}}});var bt,Rt=f(()=>{L();ce();bt=t=>({cookie:e}={})=>{let r=k(e)?e:t(e?.name||"__session",e);return le(r),{async getSession(n,o){return H(n&&await r.parse(n,o)||{})},async commitSession(n,o){let s=await r.serialize(n.data,o);if(s.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+s.length);return s},async destroySession(n,o){return r.serialize("",{...o,expires:new Date(0)})}}}});var kt,vt=f(()=>{kt=t=>({cookie:e}={})=>{let r=0,n=new Map;return t({cookie:e,async createData(o,s){let a=(++r).toString();return n.set(a,{data:o,expires:s}),a},async readData(o){if(n.has(o)){let{data:s,expires:a}=n.get(o);if(!a||a>new Date)return s;a&&n.delete(o)}return null},async updateData(o,s,a){n.set(o,{data:s,expires:a})},async deleteData(o){n.delete(o)}})}});var D,fe=f(()=>{D=class extends Error{constructor(e,r){super(`Field "${e}" exceeded upload size of ${r} bytes.`),this.field=e,this.maxBytes=r}}});function Ct({filter:t,maxPartSize:e=3e6}={}){return async({filename:r,contentType:n,name:o,data:s})=>{if(t&&!await t({filename:r,contentType:n,name:o}))return;let a=0,i=[];for await(let u of s){if(a+=u.byteLength,a>e)throw new D(o,e);i.push(u)}return typeof r=="string"?new File(i,r,{type:n}):await new Blob(i,{type:n}).text()}}var Et=f(()=>{fe();});var de={};Ut(de,{MaxPartSizeExceededError:()=>D,createCookieFactory:()=>De,createCookieSessionStorageFactory:()=>bt,createMemorySessionStorageFactory:()=>kt,createRequestHandler:()=>yt,createSession:()=>H,createSessionStorageFactory:()=>xt,defer:()=>Ve,isCookie:()=>k,isSession:()=>_t,json:()=>b,redirect:()=>z,unstable_composeUploadHandlers:()=>je,unstable_createMemoryUploadHandler:()=>Ct,unstable_parseMultipartFormData:()=>Fe});var he=f(()=>{L();Le();N();St();ce();Rt();vt();Et();fe();});var Ot=R(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});var pe=new TextEncoder,ar=async(t,e)=>{let r=await Dt(e,["sign"]),n=pe.encode(t),o=await crypto.subtle.sign("HMAC",r,n),s=btoa(String.fromCharCode(...new Uint8Array(o))).replace(/=+$/,"");return t+"."+s},ir=async(t,e)=>{let r=t.lastIndexOf("."),n=t.slice(0,r),o=t.slice(r+1),s=await Dt(e,["verify"]),a=pe.encode(n),i=ur(atob(o));return await crypto.subtle.verify("HMAC",s,i,a)?n:!1};async function Dt(t,e){return await crypto.subtle.importKey("raw",pe.encode(t),{name:"HMAC",hash:"SHA-256"},!1,e)}function ur(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}B.sign=ar;B.unsign=ir});var ye=R(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});var $=(he(),Se(de)),Tt=Ot(),me=$.createCookieFactory({sign:Tt.sign,unsign:Tt.unsign}),lr=$.createCookieSessionStorageFactory(me),At=$.createSessionStorageFactory(me),cr=$.createMemorySessionStorageFactory(At);O.createCookie=me;O.createCookieSessionStorage=lr;O.createMemorySessionStorage=cr;O.createSessionStorage=At});var Mt=R(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});var fr=ye();function dr({cookie:t,kv:e}){return fr.createSessionStorage({cookie:t,async createData(r,n){for(;;){let o=new Uint8Array(8);crypto.getRandomValues(o);let s=[...o].map(a=>a.toString(16).padStart(2,"0")).join("");if(!await e.get(s,"json"))return await e.put(s,JSON.stringify(r),{expiration:n?Math.round(n.getTime()/1e3):void 0}),s}},async readData(r){let n=await e.get(r);return n?JSON.parse(n):null},async updateData(r,n,o){await e.put(r,JSON.stringify(n),{expiration:o?Math.round(o.getTime()/1e3):void 0})},async deleteData(r){await e.delete(r)}})}ge.createWorkersKVSessionStorage=dr});var mr=R(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});var Ht=Mt(),K=ye(),g=(he(),Se(de)),hr=(t,e)=>(...r)=>(console.warn(e),t(...r)),pr=hr(Ht.createWorkersKVSessionStorage,"`createCloudflareKVSessionStorage` is deprecated. Please use `createWorkersKVSessionStorage` instead.");d.createWorkersKVSessionStorage=Ht.createWorkersKVSessionStorage;d.createCookie=K.createCookie;d.createCookieSessionStorage=K.createCookieSessionStorage;d.createMemorySessionStorage=K.createMemorySessionStorage;d.createSessionStorage=K.createSessionStorage;Object.defineProperty(d,"MaxPartSizeExceededError",{enumerable:!0,get:function(){return g.MaxPartSizeExceededError}});Object.defineProperty(d,"createRequestHandler",{enumerable:!0,get:function(){return g.createRequestHandler}});Object.defineProperty(d,"createSession",{enumerable:!0,get:function(){return g.createSession}});Object.defineProperty(d,"defer",{enumerable:!0,get:function(){return g.defer}});Object.defineProperty(d,"isCookie",{enumerable:!0,get:function(){return g.isCookie}});Object.defineProperty(d,"isSession",{enumerable:!0,get:function(){return g.isSession}});Object.defineProperty(d,"json",{enumerable:!0,get:function(){return g.json}});Object.defineProperty(d,"redirect",{enumerable:!0,get:function(){return g.redirect}});Object.defineProperty(d,"unstable_composeUploadHandlers",{enumerable:!0,get:function(){return g.unstable_composeUploadHandlers}});Object.defineProperty(d,"unstable_createMemoryUploadHandler",{enumerable:!0,get:function(){return g.unstable_createMemoryUploadHandler}});Object.defineProperty(d,"unstable_parseMultipartFormData",{enumerable:!0,get:function(){return g.unstable_parseMultipartFormData}});d.createCloudflareKVSessionStorage=pr});export{mr as a};
